name: Process Video  # 工作流程的名称

on:
  workflow_dispatch:  # 手动触发工作流程

jobs:
  build:
    runs-on: ubuntu-latest  # 使用最新的 Ubuntu 环境

    steps:
      - name: Checkout repository  # 签出仓库代码
        uses: actions/checkout@v2

      - name: Set up ffmpeg  # 安装 ffmpeg
        run: |
          sudo apt update  # 更新软件包列表
          sudo apt install -y ffmpeg  # 安装 ffmpeg

      - name: Download input video  # 下载输入视频文件
        run: |
          curl -L -o input_video.mp4 "https://example.com/path/to/your/video.mp4"  # 将 URL 替换为实际视频文件的 URL

      - name: Run video processing script  # 运行视频处理脚本
        run: |
          chmod +x process_video.sh  # 给予脚本执行权限
          ./process_video.sh input_video.mp4  # 运行脚本，处理视频
          rm input_video.mp4

      - name: push
        run: ./.github/update-repo.sh
